<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>News - Release 0.3 Announcement</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="favicon.svg">
                        <link rel="shortcut icon" href="favicon.png">
                <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
                <link rel="stylesheet" href="css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="1.1-front-page.html"><strong aria-hidden="true">1.</strong> Welcome</a></li><li class="chapter-item expanded "><a href="about.html"><strong aria-hidden="true">2.</strong> About LumoSQL</a></li><li class="chapter-item expanded "><a href="1.2-top-features.html"><strong aria-hidden="true">3.</strong> Top Features</a></li><li class="chapter-item expanded "><a href="1.4-install-LumoSQL.html"><strong aria-hidden="true">4.</strong> Install</a></li><li class="chapter-item expanded "><a href="quickstart.html"><strong aria-hidden="true">5.</strong> Quick Build and Benchmark</a></li><li class="chapter-item expanded affix "><li class="part-title">Features</li><li class="chapter-item expanded "><a href="3.4-not-forking-tool.html"><strong aria-hidden="true">6.</strong> Not-Forking Tool</a></li><li class="chapter-item expanded "><a href="lumo-build-benchmark.html"><strong aria-hidden="true">7.</strong> Build and Benchmark System (build.tcl)</a></li><li class="chapter-item expanded "><a href="backends.html"><strong aria-hidden="true">8.</strong> Available Backends - SQLite B-tree and LMDB</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="lumo-sqlite-bdb-backend.html"><strong aria-hidden="true">8.1.</strong> BDB 18.1.32 Backend</a></li><li class="chapter-item expanded "><a href="lumo-malbrain-backend.html"><strong aria-hidden="true">8.2.</strong> Karl Malbrain's C Btree</a></li></ol></li><li class="chapter-item expanded "><a href="lumo-corruption-detection-and-magic.html"><strong aria-hidden="true">9.</strong> Corruption Detection</a></li><li class="chapter-item expanded "><a href="3.3-benchmarking.html"><strong aria-hidden="true">10.</strong> Benchmarking</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="lumo-benchmark-filter.html"><strong aria-hidden="true">10.1.</strong> Displaying Benchmark Results (benchmark-filter.tcl)</a></li><li class="chapter-item expanded "><a href="statistical_analysis.html"><strong aria-hidden="true">10.2.</strong> Statistical Analysis</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">New features</li><li class="chapter-item expanded "><a href="rbac-design.html"><strong aria-hidden="true">11.</strong> Design of Role-Based Access Control</a></li><li class="chapter-item expanded "><a href="encryption.html"><strong aria-hidden="true">12.</strong> Encryption</a></li><li class="chapter-item expanded "><a href="lumion_intro.html"><strong aria-hidden="true">13.</strong> Lumion</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="rfc.html"><strong aria-hidden="true">13.1.</strong> Lumion RFC</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Research</li><li class="chapter-item expanded "><a href="2.1-development-landscape.html"><strong aria-hidden="true">14.</strong> SQLite Development Landscape</a></li><li class="chapter-item expanded "><a href="3.7-relevant-codebases.html"><strong aria-hidden="true">15.</strong> Overview of Relevant Codebases</a></li><li class="chapter-item expanded "><a href="2.4-relevant-knowledgebase.html"><strong aria-hidden="true">16.</strong> Overview of the Relevant Knowledgebase</a></li><li class="chapter-item expanded "><a href="3.6-development-notes.html"><strong aria-hidden="true">17.</strong> LumoSQL 2019 Prototype</a></li><li class="chapter-item expanded affix "><li class="part-title">Design</li><li class="chapter-item expanded "><a href="api.html"><strong aria-hidden="true">18.</strong> SQLite API Interception Points</a></li><li class="chapter-item expanded "><a href="virtual-machine.html"><strong aria-hidden="true">19.</strong> SQLite Virtual Machine Layer</a></li><li class="chapter-item expanded "><a href="WALs.html"><strong aria-hidden="true">20.</strong> LMDB Alternative to WALs</a></li><li class="chapter-item expanded "><a href="what-are-savepoints.html"><strong aria-hidden="true">21.</strong> Savepoints in SQLite</a></li><li class="chapter-item expanded "><a href="online-database-servers.html"><strong aria-hidden="true">22.</strong> Online Database Servers</a></li><li class="chapter-item expanded affix "><li class="part-title">Other</li><li class="chapter-item expanded "><a href="LumoSQL-PhaseII-Announce.html"><strong aria-hidden="true">23.</strong> News - Phase II Announcement</a></li><li class="chapter-item expanded "><a href="release-announce-0.4.html"><strong aria-hidden="true">24.</strong> News - Release 0.4 Announcement</a></li><li class="chapter-item expanded "><a href="release-announce-0.3.html" class="active"><strong aria-hidden="true">25.</strong> News - Release 0.3 Announcement</a></li><li class="chapter-item expanded "><a href="lumo-gsoc-ideas.html"><strong aria-hidden="true">26.</strong> Google Summer of Code 2021</a></li><li class="chapter-item expanded "><a href="lumo-proposed-debug.html"><strong aria-hidden="true">27.</strong> SQLite Debug Proposal</a></li><li class="chapter-item expanded "><a href="CONTRIBUTING.html"><strong aria-hidden="true">28.</strong> Conributing</a></li><li class="chapter-item expanded "><a href="lumosql-meetbot.html"><strong aria-hidden="true">29.</strong> Contributing - IRC Meetbot</a></li><li class="chapter-item expanded "><a href="CODE-OF-CONDUCT.html"><strong aria-hidden="true">30.</strong> Code of Conduct</a></li><li class="chapter-item expanded "><a href="3.2-legal-aspects.html"><strong aria-hidden="true">31.</strong> Legal Aspects</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="licensing.html"><strong aria-hidden="true">31.1.</strong> Licensing</a></li><li class="chapter-item expanded "><a href="MIT.html"><strong aria-hidden="true">31.2.</strong> MIT Licence</a></li></ol></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                                                <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="lumosql-database-v03-released"><a class="header" href="#lumosql-database-v03-released">LumoSQL Database v0.3 Released</a></h1>
<p>10th November 2020</p>
<p>The <a href="https://lumosql.org/src/lumosql">LumoSQL</a> project provides answers to questions not many people 
are asking about SQLite. SQLite is easily both the most-used database <em>and</em> most-used K-V store
in the world, and so these questions are relevant:</p>
<ul>
<li>How much faster is SQLite improving, version on version, and with various switches selected?</li>
<li>What would SQLite look like if it used a more modern journaling model instead of WAL files?</li>
<li>Would it be nice for BDB, the ancient Berkeley Database, to magically appear as an SQLite storage backend?</li>
<li>Does SQLite work faster if it has <a href="http://www.lmdb.tech/doc/">LMDB</a> as a storage backend?</li>
<li>How on earth do you benchmark SQLite anyway, and compare with itself and others?</li>
</ul>
<p><a href="https://lumosql.org/src/lumosql/doc/tip/README.md">LumoSQL is SQLite gently modified</a> to have 
multiple different backends, with <a href="https://lumosql.org/benchmarking">benchmarking</a> and more. 
There is also the separate <a href="https://lumosql.org/src/lumodoc/">LumoDoc</a> 
project, which isn't just documentation for LumoSQL but also the results of our research and
testing, including a 
<a href="https://lumosql.org/src/lumodoc/doc/trunk/doc/lumo-relevant-knowledgebase.md">list of relevant codebases</a>. </p>
<p>The last talk at the <strong>SQLite and Tcl 
Conference</strong> <a href="https://sqlite.org/forum/forumpost/521ebc1239">later on today</a> will by Dan Shearer
speaking about LumoSQL. So we thought we should make the first public release... and here it is.</p>
<h2 id="history"><a class="header" href="#history">History</a></h2>
<p>Long-time SQLite watchers may recall some prototype code by Howard Chu in 2013
called &quot;sqlightning&quot;, which was btree.c modified to call LMDB internals. That code is
what inspired LumoSQL. LumoSQL 0.3 has had significant code contributions from 
first Keith Maxwell and then Uilebheist in assisting the project founder, Dan Shearer. 
One of our main achievements is to demonstrate how much more code is needed, so patches 
are welcomed. Do please drop in on the <a href="https://lumosql.org/src/lumosql/forum">LumoSQL forum</a> or otherwise
<a href="https://lumosql.org/src/lumosql/doc/tip/CONTRIBUTING.md">consider contributing</a>. Many 
others have helped significantly with LumoSQL 0.3, including <a href="https://nlnet.nl">NLNet</a> with sponsorship,
besides a long list of essential cheerleaders, encouragers and practical supporters.</p>
<h2 id="the-big-honking-end-goal"><a class="header" href="#the-big-honking-end-goal">The Big Honking End Goal</a></h2>
<p>The end goal is to develop a stable backend storage API in SQLite. This depends on 
many things, including being minimally invasive and maximally pleasing to drh :-)
Even if it cannot be committed to SQLite for some good reason, we will be able to 
carry it in LumoSQL.</p>
<p>But before we can even think of a storage API we need to understand what
different backends might be and what they need. Even key-value stores with
quite similar APIs such as SQLite native, LMDB and BDB have different
understandings of MVCC, key sizes, locking and more. The proposed API would
need to abstract all of this. We've been studying the interactions between
src/vdbe*, btree* and pager* as some may have noticed on the SQLite forum. 
There are not very many MVCC K-V stores suitable for linking to an embedded C
library, but we want to collect all those that are.</p>
<h2 id="nope-not-a-fork"><a class="header" href="#nope-not-a-fork">Nope, Not a Fork</a></h2>
<p>LumoSQL has avoided forking SQLite by developing the
<a href="https://lumosql.org/src/not-forking">not-forking</a> tool. This tool could 
be helpful for anyone trying to stay in synch with multiple upstreams. It
knows how to fetch sources, parse version numbers and make non-controversial merges
even in cases where a straight patch or fossil merge would fail. It can also replace
entire files, and more.</p>
<h1 id="lumosql-features-as-of-version-03"><a class="header" href="#lumosql-features-as-of-version-03">LumoSQL Features as of version 0.3</a></h1>
<pre><code>$ make what
SQLITE_VERSIONS=3.34.0           # whatever the latest version is
USE_LMDB=yes
SQLITE_FOR_LMDB=3.8.3.1
LMDB_VERSIONS=0.9.9 0.9.16 0.9.27
USE_BDB=yes
SQLITE_FOR_BDB=3.18.2
BDB_VERSIONS=
BDB_STANDALONE=18.1.32
TARGETS=
    3.34.0
    3.8.3.1
    3.18.2
    3.8.3.1+lmdb-0.9.9
    3.8.3.1+lmdb-0.9.16
    3.8.3.1+lmdb-0.9.27
    +bdb-18.1.32                 # the +means it is not yet a clean LumoSQL not-fork config
</code></pre>
<p>This <a href="https://lumosql.org/src/lumosql/doc/tip/doc/lumo-test-build.md">builds</a> the versions listed.
With <a href="https://lumosql.org/src/not-forking">Not-forking</a> we can
walk up and down the version tree. </p>
<pre><code>make benchmark
</code></pre>
<p>Will perform some fairly simple operations on all targets, storing results in a
single SQLite 3.33.0 database.  This database is intended to persist, and to be
amalgamated with results from others. While some basic query and fsck-like
tools are provided, LumoSQL hopes that people with skills in statistics and
data presentation will work their magic with this interesting new dataset. The
design is meant to encourage addition of new parameters and dimensions to the
benchmarking.</p>
<pre><code>make benchmark TARGETS=3.7.17+lmdb-0.9.26+datasize-10
</code></pre>
<p>Runs the same benchmarks, except that all of the operations have a zero added to them, so
25000 SELECTs becomes 250000. Other size factors can be chosen.</p>
<h1 id="results-so-far"><a class="header" href="#results-so-far">Results So Far</a></h1>
<ul>
<li>The not-forking approach works. Yes we are going to be able to &quot;try before we buy&quot; a storage API</li>
<li>Benchmarking works. It's got a long way to go, but even this much is a powerful new way of
comparing SQLite versions</li>
<li>SQLite has improved considerably in performance in the last five years</li>
<li>SQLite+LMDB performs better than SQLite as dataset sizes increase (testing is incomplete though)</li>
<li>SQLite+MDB don't perform at all well... in fact, worse than a very much older vanilla SQLite.
(Some would hesitate to use SQLite+MDB in production anyway given that MDB
is under the AGPL licence, and SQLite is a library and thus anything using it would also be
covered by the AGPL.)</li>
</ul>
<p>There are some less-technical results too, like the fact that there are
many developers around the world who have modified SQLite in interesting ways
but there has been no effective way for their work to be compared or evaluated.
Oh and, we're using Fossil, definitively so.</p>
<h1 id="where-next-for-lumosql"><a class="header" href="#where-next-for-lumosql">Where Next for LumoSQL?</a></h1>
<ul>
<li>Walk up the SQLite version tree to tip. We're all waiting to see what SQLite 3.33.0+LMDBv1.0rc1 will be like.</li>
<li>Complete our work moving LMDB to only use liblmdb as a fully-external library</li>
<li>Do some concurrency benchmarking, possibly addressing a potential concurrency problem with LMDB 
in the process. Concurrency is not SQLite's strong point, so this will be very interesting </li>
<li>Possibly increase the SQLite version supporting BDB. This is a very important use case because
the BDB API is both classic and yet also not LMDB, meaning if we get it right then we get it
right for other K-V stores</li>
<li>Produce lots more benchmarking data with our existing tools. That means lots of CPU time, and we'd
love to have volunteers to help populate this</li>
<li>First draft backend API taking into account issues relating to keys, transactions, internal
SQLite close couplings, etc.</li>
<li>Talk to the active SQLite forks ... if you're reading this, we'd love to hear from you :-)</li>
</ul>
<p>And that is LumoSQL release 0.3. We look forward to seeing those who can make it to the SQLite and Tcl 
Conference later on today at https://sqlite.org/forum/forumpost/521ebc1239 , and to producing more
releases in quick succession.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="release-announce-0.4.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="lumo-gsoc-ideas.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="release-announce-0.4.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="lumo-gsoc-ideas.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
